<!DOCTYPE>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>KILBI 2019 – MEMORY UNIT ARCHIVES – 48</title>
  </head>
  
  <body>

    <div class="u-preloader">
      <img src="images/content/preloader.gif" alt="spinner">
    </div>

    <div class="c-kilbi-logo js-logo js-hide">
      <img src="images/content/kilbi-logo-2019.svg">
    </div>

    <main>

      <header>
        <div class="u-flex-box"><h2 class="c-box"><a href="/">Kilbi 2019©</a></h2></div>
        <div class="u-flex-box"><h1 class="c-heading__main">Memory Unit <span>Archives</span></h1></div>
        <div class="u-flex-box"><h2 class="c-box c-box--invert js-live js-hide"><a href="https://youtu.be/Vdk_BZZ0x3k" target="_blank">•&nbsp;&nbsp;Live</a></h2></div>
      </header>

      <p class="c-text js-text js-hide">
        Archives by <a href="https://quarante-huit.ch" target="_blank">Atelier – Studio 48</a>. Recorded at <a href="http://kilbi.badbonn.ch/" target="_blank">Bad Bonn Kilbi 2019</a> (30.5  — 1.6.20). You are watching all unedited footages shot for this <a href="https://vimeo.com/367326114" target="_blank">aftermovie</a>. We love you Kilbi.
        <br>
        <img class="c-image" src="images/content/48_saturn.svg">
      </p>

      <footer>
        <a class="c-link-block a-globe" href="https://quarante-huit.ch" target="_blank"><img src="images/content/globe.gif"></a>
        <h2 class="c-box js-infos">Infos</h2>
      </footer>

    </main>

    <button class="js-start c-button">Start watching</button>

    <div id="yt-wrap" class="js-hide"><div id="ytplayer" class=""></div></div>

  <script>

    const preloader = document.querySelector('.u-preloader');
    window.addEventListener('load', function () {
          preloader.classList.add('u-preloader--loaded');
    });

    var startBtn = document.querySelector('.js-start');
    var infosTxt = document.querySelector('.js-text');
    var infosBtn = document.querySelector('.js-infos');
    var liveBox = document.querySelector('.js-live');
    var logoKlb = document.querySelector('.js-logo');

    var ytWrap = document.getElementById('yt-wrap')
    var ytPlayer = document.getElementById('ytplayer')

    // 2. This code loads the IFrame Player API code asynchronously.
    var tag = document.createElement('script');
    tag.src = "https://www.youtube.com/player_api";
    var firstScriptTag = document.getElementsByTagName('script')[0];
    firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

    // 3. This function creates an <iframe> (and YouTube player)
    // after the API code downloads.
    var player;
    function onYouTubePlayerAPIReady() {
        player = new YT.Player('ytplayer', {
            width: '100%',
            height: '100%',
            videoId: 'Vdk_BZZ0x3k',
            playerVars: {
                'autoplay': 0,
                'showinfo': 0,
                'autohide': 1,
                'loop': 0,
                'controls': 0,
                'modestbranding': 1
            },
            events: {
                'onReady': onPlayerReady,
                'onStateChange': onPlayerStateChange
            }
        });
    }

      // 4. The API will call this function when the video player is ready.
      function onPlayerReady(event) {
          // event.target.playVideo();
      }

      // 5. The API calls this function when the player's state changes.
      // The function indicates that when playing a video (state=1),
      // the player should play for six seconds and then stop.
      function onPlayerStateChange(event) {
          if (event.data == YT.PlayerState.ENDED) {
              player.seekTo(0);
              player.playVideo();
          }
      }

      function pauseVideo() {
          startBtn.classList.remove('js-hide');
          liveBox.classList.remove('js-hide');

          infosTxt.classList.add('js-hide');
          ytWrap.classList.add('js-hide');

          player.stopVideo();
      }

      liveBox.addEventListener('click', function(){
          pauseVideo();
      })

      infosBtn.addEventListener('click', function(){
        infosTxt.classList.toggle('js-hide');
        console.log('hasnotclass');
        if ( !startBtn.classList.contains( 'js-hide' ) ) {
          console.log('hasclass');
          startBtn.classList.add('js-hide');
        } else if ( !ytWrap.classList.contains( 'js-hide' ) ) {

        } else {
          startBtn.classList.remove('js-hide');
        }

        if ( !logoKlb.classList.contains( 'js-hide' ) ) {
          logoKlb.classList.add( 'js-hide' );
        }
      })

      startBtn.addEventListener('click', function(){
        player.playVideo();

        this.classList.add('js-hide');
        infosTxt.classList.add('js-hide');
        
        liveBox.classList.remove('js-hide');
        ytWrap.classList.remove('js-hide');

        logoKlb.classList.toggle('js-hide');

        setTimeout(function () {
          logoKlb.classList.add('js-hide');
        }, 8000);
      })

    </script>
  </body>
</html>
